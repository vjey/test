apiVersion: backstage.io/v1alpha1
kind: API
metadata:
  name: ms-clients-api
  description: Retrieve clients details
spec:
  type: openapi
  lifecycle: production
  owner: sinaps-team
  system: sinaps
  definition: |
	openapi: 3.0.0
	info:
	  title: Client API
	  version: 1.0
	tags:
	  - name: clientsExternal
		description: Операции по работе с клиентом

	paths:
	  /api/external/client/sms/send:
		post:
		  tags:
			- clientsExternal
		  summary: CLN-E60.10 Отправка смс
		  description: Сценарий реализует отправку смс сообщения
		  operationId: sendSms
		  requestBody:
			description: Входные данные клиента для отправки смс сообщения
			required: true
			content:
			  application/json:
				schema:
				  $ref: '#/components/schemas/SendSmsRequest'
		  responses:
			200:
			  description: Сообщение о результате прохождения ФЛК
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/SendSmsResponse'
			400:
			  description: Сообщение об ошибке в запросе
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			401:
			  description: Сообщение об отсутствии аксесс токена
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			403:
			  description: Сообщение об отсутствии разрешения на вызов
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			500:
			  description: Сообщение об ошибки при обработке
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'

	  /api/external/client/create:
		post:
		  tags:
			- clientsExternal
		  summary: CLN-E10.10 Cоздать карточку клиента
		  description: Сценарий реализует получение карточки клиента
		  operationId: createClient
		  requestBody:
			description: Входные данные для получении карточки клиента
			required: true
			content:
			  application/json:
				schema:
				  $ref: '#/components/schemas/CreateClientRequest'
		  responses:
			200:
			  description: Исходящие данные при получении карточки клиента
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/CreateClientResponse'
			400:
			  description: Сообщение об ошибке в запросе
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			401:
			  description: Сообщение об отсутствии аксесс токена
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			403:
			  description: Сообщение об отсутствии разрешения на вызов
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			500:
			  description: Сообщение об ошибки при обработке
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'

	  /api/external/client/email/update:
		patch:
		  tags:
			- clientsExternal
		  summary: CLN-E30.13 Изменить email клиента
		  description: Сценарий реализует изменение email клиента
		  operationId: updateEmail
		  requestBody:
			description: Входные данные для изменения email клиента
			required: true
			content:
			  application/json:
				schema:
				  $ref: '#/components/schemas/UpdateEmailRequest'
		  responses:
			200:
			  description: Исходящие данные при изменении email клиента
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/UpdateEmailResponse'
			400:
			  description: Сообщение об ошибке в запросе
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			401:
			  description: Сообщение об отсутствии аксесс токена
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			403:
			  description: Сообщение об отсутствии разрешения на вызов
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			500:
			  description: Сообщение об ошибки при обработке
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'

	  /api/external/client/phone/check:
		post:
		  tags:
			- clientsExternal
		  summary: CLN-E30.20 Проверка телефона на уникальность
		  description: Сценарий реализует проверку телефона на уникальность
		  operationId: checkPhone
		  requestBody:
			description: Входные данные для проверки телефона на уникальность
			required: true
			content:
			  application/json:
				schema:
				  $ref: '#/components/schemas/CheckPhoneRequest'
		  responses:
			200:
			  description: Исходящие данные при проверке телефона на уникальность
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/CheckPhoneResponse'
			400:
			  description: Сообщение об ошибке в запросе
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			401:
			  description: Сообщение об отсутствии аксесс токена
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			403:
			  description: Сообщение об отсутствии разрешения на вызов
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			500:
			  description: Сообщение об ошибки при обработке
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'

	  /api/external/client/get:
		post:
		  tags:
			- clientsExternal
		  summary: CLN-E10.18 Найти карточку клиента по номеру телефона
		  description: Сценарий реализует поиск карточки клиента по номеру телефона
		  operationId: getClient
		  requestBody:
			description: Входные данные для поиска клиента
			required: true
			content:
			  application/json:
				schema:
				  $ref: '#/components/schemas/GetClientRequest'
		  responses:
			200:
			  description: Исходящие данные при поиске клиента
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GetClientResponse'
			400:
			  description: Сообщение об ошибке в запросе
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			401:
			  description: Сообщение об отсутствии аксесс токена
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			403:
			  description: Сообщение об отсутствии разрешения на вызов
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			500:
			  description: Сообщение об ошибки при обработке
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'

	  /api/external/client/update:
		patch:
		  tags:
			- clientsExternal
		  summary: CLN-E30.10 Изменить карточку клиента (ФИО, ДР)
		  description: Сценарий реализует изменение карточки клиента (ФИО, ДР)
		  operationId: updateClient
		  requestBody:
			description: Входные данные для изменения карточки клиента
			required: true
			content:
			  application/json:
				schema:
				  $ref: '#/components/schemas/UpdateClientRequest'
		  responses:
			200:
			  description: Исходящие данные при изменении карточки клиента
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/UpdateClientResponse'
			400:
			  description: Сообщение об ошибке в запросе
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			401:
			  description: Сообщение об отсутствии аксесс токена
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			403:
			  description: Сообщение об отсутствии разрешения на вызов
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			500:
			  description: Сообщение об ошибки при обработке
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'

	  /api/external/client/phone/update:
		patch:
		  tags:
			- clientsExternal
		  summary: CLN-E30.12 Изменить номер телефона клиента
		  description: Сценарий реализует изменение номера телефона клиента
		  operationId: updatePhone
		  requestBody:
			description: Входные данные для изменения номера телефона клиента
			required: true
			content:
			  application/json:
				schema:
				  $ref: '#/components/schemas/UpdatePhoneRequest'
		  responses:
			200:
			  description: Исходящие данные при изменении номера телефона клиента
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/UpdatePhoneResponse'
			400:
			  description: Сообщение об ошибке в запросе
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			401:
			  description: Сообщение об отсутствии аксесс токена
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			403:
			  description: Сообщение об отсутствии разрешения на вызов
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			500:
			  description: Сообщение об ошибки при обработке
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
	  /api/external/client/get-data-by-id:
		post:
		  tags:
			- clientsExternal
		  summary: CLN-E10.11 Получить данные клиента по его идентификатору
		  description: Сценарий реализует получение данных клиента по его идентификатору
		  operationId: getClientDataById
		  requestBody:
			description: Входные данные для поиска клиента
			required: true
			content:
			  application/json:
				schema:
				  $ref: '#/components/schemas/GetClientDataRequest'
		  responses:
			200:
			  description: Исходящие данные при поиске клиента
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GetClientDataResponse'
			400:
			  description: Сообщение об ошибке в запросе
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			401:
			  description: Сообщение об отсутствии аксесс токена
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			403:
			  description: Сообщение об отсутствии разрешения на вызов
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			500:
			  description: Сообщение об ошибки при обработке
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'

	  /api/external/client/consents/save:
		post:
		  tags:
			- clientsExternal
		  summary: CLN-E30.14 Сохранить согласия клиента
		  description: Сценарий реализует сохранение согласий клиента
		  operationId: saveConsents
		  requestBody:
			description: Входные данные для сохранения согласий
			required: true
			content:
			  application/json:
				schema:
				  $ref: '#/components/schemas/SaveConsentsRequest'
		  responses:
			200:
			  description: Исходящие данные при сохранении согласий клиента
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/SaveConsentsResponse'
			400:
			  description: Сообщение об ошибке в запросе
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			401:
			  description: Сообщение об отсутствии аксесс токена
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			403:
			  description: Сообщение об отсутствии разрешения на вызов
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			500:
			  description: Сообщение об ошибки при обработке
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'

	  /api/external/client/contacts/confirm:
		post:
		  tags:
			- clientsExternal
		  summary: CLN-E30.15 Добавить контактам клиента отметку о подтверждении
		  description: Сценарий реализует добавление контактам клиента отметки о подтверждении
		  operationId: confirmContacts
		  requestBody:
			description: Входные данные для добавления контактам клиента отметки о подтверждении
			required: true
			content:
			  application/json:
				schema:
				  $ref: '#/components/schemas/ConfirmContactsRequest'
		  responses:
			200:
			  description: Исходящие данные при добавлении контактам клиента отметки о подтверждении
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/ConfirmContactsResponse'
			400:
			  description: Сообщение об ошибке в запросе
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			401:
			  description: Сообщение об отсутствии аксесс токена
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			403:
			  description: Сообщение об отсутствии разрешения на вызов
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
			500:
			  description: Сообщение об ошибки при обработке
			  content:
				application/json:
				  schema:
					$ref: '#/components/schemas/GenericErrorResponse'
	components:
	  schemas:

		SendSmsRequest:
		  title: Входящий объект при отправки смс
		  description: Входящий объект при отправки смс
		  type: object
		  required:
			- requestId
			- phone
			- message
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			phone:
			  title: Телефон
			  description: Телефон клиента
			  $ref: "#/components/schemas/Phone"
			message:
			  title: Сообщение
			  description: Сообщение
			  type: string
			  example: Пример входящего сообщения
			  minLength: 1

		SendSmsResponse:
		  title: Исходящий объект при отправки смс
		  description: Исходящий объект при отправки смс
		  type: object
		  required:
			- requestId
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			flkReport:
			  title: Отчет об ошибках ФЛК
			  description: Отчет об ошибках ФЛК
			  $ref: "#/components/schemas/FlkReport"

		CreateClientRequest:
		  title: Входящий объект при получении карточки клиента
		  description: Входящий объект при получении карточки клиента
		  type: object
		  required:
			- requestId
			- client
			- consents
		  properties:
			requestId:
			  title: ID Запроса
			  description: ID Запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			client:
			  title: Клиент
			  description: Клиент
			  $ref: "#/components/schemas/NewClient"
			consents:
			  title: Массив согласий клиентов
			  description: Массив согласий клиентов
			  type: array
			  items:
				$ref: "#/components/schemas/NewConsent"

		CreateClientResponse:
		  title: Исходящий объект при получении карточки клиента
		  description: Исходящий объект при получении карточки клиента
		  type: object
		  required:
			- requestId
			- client
			- consents
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			client:
			  title: Клиент
			  description: Клиент
			  $ref: "#/components/schemas/Client"
			consents:
			  title: Массив согласий клиентов
			  description: Массив согласий клиентов
			  type: array
			  items:
				$ref: "#/components/schemas/Consent"
			flkReport:
			  title: Отчет об ошибках ФЛК
			  description: Отчет об ошибках ФЛК
			  $ref: "#/components/schemas/FlkReport"

		NewClient:
		  title: Клиент
		  description: Данные клиента
		  type: object
		  required:
			- lastName
			- firstName
			- middleName
			- phone
		  properties:
			lastName:
			  title: Фамилия
			  description: Фамилия клиента
			  type: string
			firstName:
			  title: Имя
			  description: Имя клиента
			  type: string
			middleName:
			  title: Отчество
			  description: Отчество клиента. Если отчество отсутствует, то должно быть заполнено "Нет"
			  type: string
			birthDate:
			  title: Дата рождения
			  description: Дата рождения клиента
			  type: string
			  format: date
			  example: 2002-02-20
			extendedIntermediaryChannelCode:
			  deprecated: true
			  title: Канал привлечения и посредник
			  description: Канал привлечения и посредник, разделенные через запятую
			  type: string
			  pattern: "\\d{4},[a-zA-Z]{3,5}"
			  example: 0001,sms
			intermediaryChannelCode:
			  title: Канал привлечения и посредник
			  description: Канал привлечения и посредник, разделенные через запятую (вместо extendedIntermediaryChannelCode)
			  type: string
			  pattern: "\\d{4},[a-zA-Z]{3,5}"
			  example: 0001,sms
			phone:
			  title: Телефон
			  description: Телефон клиента
			  $ref: "#/components/schemas/Phone"

		NewConsent:
		  title: Согласие
		  description: Согласие клиента
		  type: object
		  required:
			- consentType
			- hash
			- approvedAt
		  properties:
			consentType:
			  title: Тип согласия
			  description: Тип согласия по справочнику
			  type: string
			  maxLength: 40
			hash:
			  title: Хэш текста согласия
			  description: Хэш текста согласия. Формирует (передает) вызывающая сторона на основании того текста, который был показан Клиенту
			  type: string
			approvedAt:
			  title: Дата получения согласия
			  description: Дата получения согласия
			  type: string
			  format: date-time
			  example: 2002-02-20T02:20:02.222Z

		Client:
		  title: Клиент
		  description: Клиент
		  type: object
		  required:
			- id
			- primaryRecordId
			- lastName
			- firstName
			- middleName
			- intermediaryCode
			- intermediaryChannelCode
			- acquiredAt
			- phone
			- phoneСonfirmed
			- status
			- requestSourceCode
			- actualVersionId
		  properties:
			id:
			  title: Идентификатор клиента
			  description: Идентификатор клиента
			  $ref: "#/components/schemas/ClientId"
			primaryRecordId:
			  title: ID ПЗ
			  description: ID первичной записи ФЛ
			  type: integer
			lastName:
			  title: Фамилия
			  description: Фамилия клиента
			  type: string
			firstName:
			  title: Имя
			  description: Имя клиента
			  type: string
			middleName:
			  title: Отчество
			  description: Отчество клиента
			  type: string
			birthDate:
			  title: Дата рождения
			  description: Дата рождения клиента
			  type: string
			  format: date
			  example: 2002-02-20
			intermediaryCode:
			  title: Код посредника
			  description: Код посредника
			  type: string
			  maxLength: 40
			intermediaryChannelCode:
			  title: Код канала привлечения
			  description: Код канала привлечения
			  type: string
			  maxLength: 40
			acquiredAt:
			  title: Дата привлечения клиента
			  description: Дата привлечения клиента
			  type: string
			  format: date-time
			  example: 2002-02-20T02:20:02.222Z
			phone:
			  title: Телефон
			  description: Телефон клиента
			  $ref: "#/components/schemas/Phone"
			phoneConfirmed:
			  title: Телефон подтвержден
			  description: Телефон подтвержден
			  type: boolean
			email:
			  title: email
			  description: email
			  type: string
			  format: email
			status:
			  title: Статус
			  description: Статус
			  $ref: "#/components/schemas/ClientStatus"
			requestSourceCode:
			  title: Код системы-источника
			  description: Код системы-источника
			  $ref: "#/components/schemas/RequestSourceCode"
			actualVersionId:
			  title: Актуальная версия карточки
			  description: Содержит ID актуальной версии карточки клиента
			  type: string
			  format: uuid

		Consent:
		  title: Согласие
		  description: Согласие клиента
		  type: object
		  required:
			- id
			- clientId
			- businessObjectId
			- consentType
			- hash
			- approvedAt
			- approvingSystem
		  properties:
			id:
			  title: Идентификатор согласия
			  description: Идентификатор согласия
			  type: string
			  format: uuid
			  example: 0b5f3ab9-7891-4889-acdd-7eb91fe00551
			clientId:
			  title: Идентификатор клиента
			  description: Идентификатор клиента
			  $ref: "#/components/schemas/ClientId"
			businessObjectId:
			  title: Идентификатор объекта
			  description: Идентификатор объекта
			  type: string
			  format: uuid
			  example: 0b5f3ab9-7891-4889-acdd-7eb91fe00551
			consentType:
			  title: Тип согласия
			  description: Тип согласия
			  type: string
			  maxLength: 40
			hash:
			  title: Хэш текста согласия
			  description: Хэш текста согласия. Формирует (передает) вызывающая сторона на основании того текста, который был показан Клиенту
			  type: string
			approvedAt:
			  title: Дата получения согласия
			  description: Дата получения согласия
			  type: string
			  format: date-time
			  example: 2002-02-20T02:20:02.222Z
			approvingSystem:
			  title: Система получения согласия
			  description: Система получения согласия
			  $ref: "#/components/schemas/RequestSourceCode"

		RequestSourceCode:
		  title: Код системы-источника
		  description: Код системы-источника
		  type: string
		  enum:
			# Мобильное приложение
			- MOBILE_BACKEND
			# ARM сотрудника
			- EMPLOYEE_GUI
			# Сервис планировщика
			- MS_SCHEDULER

		ClientStatus:
		  title: Статус клиента
		  description: Статус клиента
		  type: string
		  enum:
			# Проспект
			- PROSPECT
			# Действующий клиент
			- POLICYHOLDER
			# Застрахованный
			- INSURED

		UpdateEmailRequest:
		  title: Входящий объект при обновлении email
		  description: Входящий объект при обновлении email
		  type: object
		  required:
			- requestId
			- clientId
			- email
		  properties:
			requestId:
			  title: ID запроса
			  description: ID "сквозного" запроса, поступившего в Gateway
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			clientId:
			  title: ID клиента
			  description: ID клиента
			  $ref: "#/components/schemas/ClientId"
			email:
			  title: email
			  description: email
			  type: string
			  format: email

		UpdateEmailResponse:
		  title: Входящий объект при обновлении email
		  description: Входящий объект при обновлении email
		  type: object
		  required:
			- requestId
		  properties:
			requestId:
			  title: ID запроса
			  description: ID "сквозного" запроса, поступившего в Gateway
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			flkReport:
			  title: Отчет об ошибках ФЛК
			  description: Отчет об ошибках ФЛК
			  $ref: "#/components/schemas/FlkReport"

		CheckPhoneRequest:
		  title: Входящий объект для проверки телефона на уникальность
		  description: Входящий объект для проверки телефона на уникальность
		  type: object
		  required:
			- requestId
			- phone
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			phone:
			  title: Телефон
			  description: Телефон клиента
			  $ref: "#/components/schemas/Phone"

		CheckPhoneResponse:
		  title: Исходящий объект при проверке телефона на уникальность
		  description: Исходящий объект при проверке телефона на уникальность
		  type: object
		  required:
			- requestId
		  properties:
			requestId:
			  title: ID ответа
			  description: ID ответа
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			flkReport:
			  title: Отчет об ошибках ФЛК
			  description: Отчет об ошибках ФЛК
			  $ref: "#/components/schemas/FlkReport"

		GetClientRequest:
		  title: Входящий объект для получения карточки клиента
		  description: Входящий объект для получения карточки клиента
		  type: object
		  required:
			- requestId
			- phone
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			phone:
			  title: Телефон
			  description: Телефон клиента
			  $ref: "#/components/schemas/Phone"

		GetClientResponse:
		  title: Исходящий объект при получении карточки клиента
		  description: Исходящий объект при получении карточки клиента
		  type: object
		  required:
			- requestId
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			client:
			  title: Клиент
			  description: Клиент
			  $ref: "#/components/schemas/Client"
			consents:
			  title: Массив согласий клиентов
			  description: Массив согласий клиентов
			  type: array
			  items:
				$ref: "#/components/schemas/Consent"
			  minItems: 0
			  maxItems: 100
			flkReport:
			  title: Отчет об ошибках ФЛК
			  description: Отчет об ошибках ФЛК
			  $ref: "#/components/schemas/FlkReport"

		UpdateClientRequest:
		  title: Входящий объект для обновления информации о клиенте
		  description: Входящий объект для обновления информации о клиенте
		  type: object
		  required:
			- requestId
			- client
		  properties:
			requestId:
			  title: ID запроса
			  description: ID "сквозного" запроса, поступившего в Gateway
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			client:
			  title: Новые данные клиента
			  description: Новые данные клиента
			  $ref: "#/components/schemas/UpdateClientObject"

		UpdateClientResponse:
		  title: Исходящий объект при обновлении информации о клиенте
		  description: Исходящий объект при обновлении информации о клиенте
		  type: object
		  required:
			- requestId
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			flkReport:
			  title: Отчет об ошибках ФЛК
			  description: Отчет об ошибках ФЛК
			  $ref: "#/components/schemas/FlkReport"

		UpdateClientObject:
		  title: Новые данные клиента
		  description: Новые данные клиента
		  type: object
		  required:
			- id
		  properties:
			id:
			  title: Идентификатор клиента
			  description: Идентификатор клиента
			  $ref: "#/components/schemas/ClientId"
			lastName:
			  title: Фамилия
			  description: Фамилия клиента
			  type: string
			firstName:
			  title: Имя
			  description: Имя клиента
			  type: string
			middleName:
			  title: Отчество
			  description: Отчество клиента
			  type: string
			birthDate:
			  title: Дата рождения
			  description: Дата рождения клиента
			  type: string
			  format: date

		UpdatePhoneRequest:
		  title: Входящий объект для изменения номера телефона клиента
		  description: Входящий объект для изменения номера телефона клиента
		  type: object
		  required:
			- requestId
			- clientId
			- phone
		  properties:
			requestId:
			  title: ID запроса
			  description: ID "сквозного" запроса, поступившего в Gateway
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			clientId:
			  title: Идентификатор клиента
			  description: Идентификатор клиента
			  $ref: "#/components/schemas/ClientId"
			phone:
			  title: Телефон
			  description: Телефон клиента
			  $ref: "#/components/schemas/Phone"

		UpdatePhoneResponse:
		  title: Исходящий объект при изменении номера телефона клиента
		  description: Исходящий объект при изменении номера телефона клиента
		  type: object
		  required:
			- requestId
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			flkReport:
			  title: Отчет об ошибках ФЛК
			  description: Отчет об ошибках ФЛК
			  $ref: "#/components/schemas/FlkReport"

		GetClientDataRequest:
		  title: Входящий объект для получения данных клиента по его идентификатору
		  description: Входящий объект для получения данных клиента по его идентификатору
		  type: object
		  required:
			- requestId
			- clientId
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			clientId:
			  title: Идентификатор клиента
			  description: Идентификатор клиента
			  $ref: "#/components/schemas/ClientId"

		GetClientDataResponse:
		  title: Исходящий объект при получении карточки клиента
		  description: Исходящий объект при получении карточки клиента
		  type: object
		  required:
			- requestId
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			client:
			  title: Клиент
			  description: Клиент
			  $ref: "#/components/schemas/ClientExtended"
			consents:
			  title: Массив согласий клиентов
			  description: Массив согласий клиентов
			  type: array
			  items:
				$ref: "#/components/schemas/Consent"
			  minItems: 0
			  maxItems: 100
			flkReport:
			  title: Отчет об ошибках ФЛК
			  description: Отчет об ошибках ФЛК
			  $ref: "#/components/schemas/FlkReport"

		ClientExtended:
		  allOf:
			- $ref: "#/components/schemas/Client"
			- type: object
			  properties:
				plannedPolicyholderStatusExpirationDate:
				  type: string
				  format: date
				plannedInsuredStatusExpirationDate:
				  type: string
				  format: date
				overridingVersionClientId:
				  title: ID актуальной версии карточки клиента
				  description: Заполняется ID версии карточки клиента, ставшей активной в результате слияния
				  type: string
				  format: uuid
				overridingClientId:
				  title: ID активной карточки клиента
				  description: Заполняется ID активной карточки клиента, обновляется при повторных слияниях ID более новой актуальной карточки клиента
				  type: string
				  format: uuid
				comment:
				  title: Комментарий
				  description: Комментарий
				  type: string

		SaveConsentsRequest:
		  title: Входящий объект для сохранения согласий клиента
		  description: Входящий объект для сохранения согласий клиента
		  type: object
		  required:
			- requestId
			- clientId
			- consents
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			clientId:
			  title: Идентификатор клиента
			  description: Идентификатор клиента
			  $ref: "#/components/schemas/ClientId"
			consents:
			  title: Массив согласий клиентов
			  description: Массив согласий клиентов
			  type: array
			  items:
				$ref: "#/components/schemas/NewConsent"
			  minItems: 1
			  maxItems: 100

		SaveConsentsResponse:
		  title: Исходящий объект при сохранении согласий клиента
		  description: Исходящий объект при сохранении согласий клиента
		  type: object
		  required:
			- requestId
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			flkReport:
			  title: Отчет об ошибках ФЛК
			  description: Отчет об ошибках ФЛК
			  $ref: "#/components/schemas/FlkReport"

		ConfirmContactsRequest:
		  title: Входящий объект при подтверждении контактов клиента
		  description: Входящий объект при подтверждении контактов клиента
		  type: object
		  required:
			- requestId
			- clientId
		  properties:
			requestId:
			  title: ID Запроса
			  description: ID Запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			clientId:
			  title: Идентификатор клиента
			  description: Идентификатор клиента
			  $ref: "#/components/schemas/ClientId"
			email:
			  title: email
			  description: email
			  type: string
			  format: email
			phone:
			  title: Телефон
			  description: Телефон клиента
			  $ref: "#/components/schemas/Phone"

		ConfirmContactsResponse:
		  title: Исходящий объект при подтверждении контактов клиента
		  description: Исходящий объект при подтверждении контактов клиента
		  type: object
		  required:
			- requestId
		  properties:
			requestId:
			  title: ID запроса
			  description: ID запроса
			  $ref: "#/components/schemas/RequestId"
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  $ref: "#/components/schemas/ProcessId"
			flkReport:
			  title: Отчет об ошибках ФЛК
			  description: Отчет об ошибках ФЛК
			  $ref: "#/components/schemas/FlkReport"

	# Reusable items
		RequestId:
		  title: ID запроса
		  description: ID запроса
		  type: string
		  format: uuid
		  example: 0b5f3ab9-7891-4889-acdd-7eb91fe00551

		ProcessId:
		  title: Идентификатор запроса от МП
		  description: Идентификатор запроса от МП
		  type: string
		  format: uuid
		  example: 0b5f3ab9-7891-4889-acdd-7eb91fe00551

		ClientId:
		  title: ID Карточки клиента
		  description: ID Карточки клиента
		  type: string
		  format: uuid
		  example: 0b5f3ab9-7891-4889-acdd-7eb91fe00551

		Phone:
		  title: Телефон
		  description: Телефон
		  type: string
		  example: "+712345678900"
		  pattern: ^[+]7\\d*
		  minLength: 11
		  maxLength: 18

		FlkReport:
		  title: Отчет об ошибках ФЛК
		  description: Отчет об ошибках ФЛК
		  required:
			- requestId
			- mismatches
		  properties:
			requestId:
			  title: Сквозной идентификатор запрос
			  description: Идентификатор запроса, для которого сформирован отчет
			  type: string
			  format: uuid
			  example: 0b5f3ab9-7891-4889-acdd-7eb91fe00551
			businessObjectId:
			  title: Идентификатор записи договора/дополнительного соглашения
			  description: Идентификатор записи договора/дополнительного соглашения, при регистрации/изменении которого сформирован отчет
			  type: string
			  format: uuid
			  example: 0b5f3ab9-7891-4889-acdd-7eb91fe00551
			mismatches:
			  title: Ошибки ФЛК
			  description: Ошибки ФЛК
			  type: array
			  minItems: 1
			  items:
				$ref: '#/components/schemas/Mismatch'

		Mismatch:
		  title: Ошибка ФЛК
		  description: Ошибка ФЛК
		  required:
			- code
		  properties:
			code:
			  title: Код ошибки
			  description: Код ошибки
			  type: string
			message:
			  title: Сообщение
			  description: Сообщение пользователю (инициатору)
			  type: string
			isCritical:
			  title: Критичность
			  description: Критичность ошибки
			  type: boolean
			codeExceptional:
			  title: Код доступности для исправления через исключения
			  description: Не используется
			  type: string
			externalObjectId:
			  title: Внешний идентификатор
			  description: Уникальный внешний идентификатор атрибута в json договора
			  type: string
			  example: $.contractInfo.parties[0].person.license
			businessObjectId:
			  title: Идентификатор записи договора/дополнительного соглашения
			  description: Идентификатор записи договора/дополнительного соглашения, при регистрации/изменении которого сформирован отчет
			  type: string
			  format: uuid
			  example: 0b5f3ab9-7891-4889-acdd-7eb91fe00551
			mismatchElements:
			  title: Несоответствующие атрибуты
			  description: Несоответствующие атрибуты
			  type: array
			  items:
				$ref: '#/components/schemas/MismatchElement'

		MismatchElement:
		  title: Атрибут с ошибкой
		  description: Атрибут, для которого выявлена ошибка ФЛК
		  type: object
		  required:
			- attributeName
			- attributePath
		  properties:
			attributeName:
			  title: Наименование атрибута
			  description: Наименование атрибута
			  type: string
			  example: number
			attributePath:
			  title: Путь атрибута
			  description: Путь атрибута
			  type: string
			  example: $.parties[1].license[0]
			attributeValue:
			  title: Значение атрибута
			  description: Значение атрибута
			  type: string
			  example: 635425

		GenericErrorResponse:
		  title: Ошибка
		  description: Объект отдается в случае ответа != 200
		  type: object
		  required:
			- requestId
			- flkReport
		  properties:
			processId:
			  title: Идентификатор запроса от МП
			  description: Идентификатор запроса от МП
			  type: string
			  format: uuid
			  example: 0b5f3ab9-7891-4889-acdd-7eb91fe00551
			requestId:
			  title: ID запроса
			  description: ID запроса
			  type: string
			  format: uuid
			flkReport:
			  title: Отчет об ошибках ФЛК
			  description: Отчет об ошибках ФЛК
			  $ref: "#/components/schemas/FlkReport"
